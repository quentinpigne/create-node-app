import nconf from 'nconf';
import Router, { IMiddleware } from 'koa-router';
import { paramCase } from 'change-case';
{{#if helloEndpoint}}

import hello from './hello';
{{/if}}

const routes: { [key: string]: () => IMiddleware } = {
{{#if helloEndpoint}}
  hello,
{{/if}}
};

export default () => {
  const router: Router = new Router();
  router.prefix(nconf.get('api:prefix') as string);

  // Initialize all routes
  Object.keys(routes).forEach((routeName: string) => {
    // Add route to the speficied route name
    router.use('/' + paramCase(routeName), routes[routeName]());
  });

  return router.routes();
};
