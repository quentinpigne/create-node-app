'use strict';
const nconf = require('nconf');
const Router = require("koa-router");
const changeCase = require("change-case");

const routes = require("require-dir")();

module.exports = () => {
  const router = Router();
  router.prefix(nconf.get('api:prefix'))

  // Initialize all routes
  Object.keys(routes).forEach(routeName => {
    // Add route to the speficied route name
    router.use('/' + changeCase.paramCase(routeName), routes[routeName]());
  });

  return router.routes();
}
