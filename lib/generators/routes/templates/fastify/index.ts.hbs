import { FastifyInstance, FastifyPluginCallback, RegisterOptions } from 'fastify';
import { paramCase } from 'change-case';
{{#if helloEndpoint}}

import hello from './hello';
{{/if}}

const routes: { [key: string]: FastifyPluginCallback } = {
{{#if helloEndpoint}}
  hello,
{{/if}}
};

export default (fastify: FastifyInstance, opts: RegisterOptions, done: () => void) => {
  // Initialize all routes
  Object.keys(routes).forEach((routeName) => {
    // Add route to the speficied route name
    void fastify.register(routes[routeName], {  prefix: '/' + paramCase(routeName)});
  });
  done();
};
