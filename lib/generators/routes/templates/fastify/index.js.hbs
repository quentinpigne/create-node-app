'use strict';
const changeCase = require('change-case');

const routes = require('require-dir')();

module.exports = (fastify, opts, done) => {
  // Initialize all routes
  Object.keys(routes).forEach((routeName) => {
    // Add route to the speficied route name
    fastify.register(routes[routeName], {  prefix: '/' + changeCase.paramCase(routeName)});
  });
  done();
};
